# .bazelrc

# Use clang as the compiler
build --action_env=CC=clang
build --action_env=CXX=clang++

# Common settings for all builds
build --cxxopt='-std=c++20'
build --host_cxxopt='-std=c++20'

# Enable warnings
build --cxxopt='-Wall'
build --cxxopt='-Wextra'
build --cxxopt='-Wpedantic'
build --cxxopt='-Werror'

# Build configurations
build:debug --compilation_mode=dbg
build:debug --cxxopt='-g'
build:debug --strip=never

build:release --compilation_mode=opt
build:release --copt='-O3'
build:release --strip=always

# Default to release if no config specified
build:default --config=release

# Required for bazel_clang_tidy to operate as expected
build:clang-tidy --aspects @bazel_clang_tidy//clang_tidy:clang_tidy.bzl%clang_tidy_aspect
build:clang-tidy --output_groups=report
